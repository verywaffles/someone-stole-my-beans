{
  "start": {
    "text": "You wake up. Your beans are gone. The jar is empty. A single bean shell lies on the floor.",
    "choices": [
      { "label": "Investigate the neighbor", "next": "neighborDoor" },
      { "label": "Follow the bean trail outside", "next": "forestPath" },
      { "label": "Call the Bureau of Legumes & Lost Goods", "next": "bureauIntro" }
    ]
  },

  "neighborDoor": {
    "text": "You knock on your neighbor’s door. They open it just a crack. Their eyes dart around nervously.",
    "choices": [
      { "label": "Accuse them immediately", "next": "accuseNeighbor" },
      { "label": "Offer them a granola bar as a bribe", "next": "bribeNeighbor" },
      { "label": "Sneak into their backyard", "next": "backyardSneak" }
    ]
  },

  "accuseNeighbor": {
  "text": "You point dramatically. 'YOU stole my beans!' Your neighbor gasps. 'I would NEVER! But... I did see someone lurking around your house last night.'",
  "choices": [
    { "label": "Ask who they saw", "next": "neighborSaw" },
    { "label": "Storm off dramatically", "next": "stormOff" },
    { "label": "Throw a piece of bread at them (why not?)", "next": "breadFight" }
  ]
},


  "neighborSaw": {
    "text": "'It was... a raccoon. But not a normal one. This one wore a tiny bandana.'",
    "choices": [
      { "label": "Head to the forest", "next": "forestPath" },
      { "label": "Ask more about the raccoon", "next": "raccoonLore" }
    ]
  },

  "raccoonLore": {
    "text": "Your neighbor whispers, 'They call him... The Bean Bandit. Leader of the Raccoon Syndicate.'",
    "choices": [
      { "label": "Go confront the syndicate", "next": "raccoonEncounter" },
      { "label": "Pretend you’re not terrified", "next": "pretendBrave" }
    ]
  },

  "pretendBrave": {
    "text": "You puff out your chest. 'I fear no raccoon.' Your neighbor nods politely, clearly unconvinced.",
    "choices": [
      { "label": "Go to the forest anyway", "next": "forestPath" },
      { "label": "Go home and rethink your life", "next": "endingCoward" }
    ]
  },

  "stormOff": {
    "text": "You storm off, but trip over a garden gnome. The neighbor watches silently.",
    "choices": [
      { "label": "Recover your dignity and continue", "next": "start" },
      { "label": "Lie on the ground and give up", "next": "endingGiveUp" }
    ]
  },

  "breadFight": {
  "text": "Your neighbor stares at you. 'What was that for? You wanna fight me?'",
  "choices": [
    { "label": "Throw another piece of bread at your neighbor", "next": "powPow" },
    { "label": "Apologize and give him a granola bar", "next": "bribeNeighbor" }
  ]
},

  "bribeNeighbor": {
    "text": "You offer a granola bar. Your neighbor snatches it instantly. 'Okay fine, I DID see something. A trail of beans leading into the woods.'",
    "choices": [
      { "label": "Follow the trail", "next": "forestPath" },
      { "label": "Ask why they’re so obsessed with granola bars", "next": "granolaLore" }
    ]
  },

  "granolaLore": {
    "text": "'I haven't eaten real food in days,' they whisper. 'The raccoons... they took everything.'",
    "choices": [
      { "label": "Team up with the neighbor", "next": "teamUp" },
      { "label": "Go alone", "next": "forestPath" }
    ]
  },

  "teamUp": {
    "text": "Your neighbor grabs a broom. 'Let’s get your beans back.'",
    "choices": [
      { "label": "Charge into the forest together", "next": "raccoonEncounterTeam" }
    ]
  },

  "backyardSneak": {
    "text": "You sneak into their backyard. You find... a half‑eaten can of beans. Suspicious.",
    "choices": [
      { "label": "Confront them with the evidence", "next": "confrontBackyard" },
      { "label": "Taste the beans (why?)", "next": "tasteBeans" }
    ]
  },

  "confrontBackyard": {
    "text": "Your neighbor panics. 'Okay fine! I stole ONE bean. But the rest? The raccoons took them!'",
    "choices": [
      { "label": "Accept their apology", "next": "start" },
      { "label": "Demand compensation", "next": "endingCompensation" }
    ]
  },

  "tasteBeans": {
    "text": "You taste the beans. They are... raccoon‑flavored. You immediately regret everything.",
    "choices": [
      { "label": "Go to the forest", "next": "forestPath" },
      { "label": "Sit down and cry", "next": "endingCry" }
    ]
  },

  "forestPath": {
  "text": "You follow the bean shells into the woods. Strange chittering echoes around you.",
  "choices": [
    { "label": "Investigate the sound", "next": "raccoonEncounter" },
    { "label": "Turn back", "next": "start" },
    { "label": "Follow a strange glowing crack in the air", "next": "breakReality" },
    { "label": "Talk to the mysterious old man playing chess", "next": "chessChallenge" },
    { "label": "Look at that weird stool thingy which looks mysterious", "next": "inventoryTest"}
  ]
},


  "raccoonEncounter": {
  "text": "A raccoon wearing a tiny bandana steps out. 'So... you’ve come for your beans.'",
  "choices": [
    { "label": "Negotiate", "next": "negotiateRaccoon" },
    { "label": "Fight", "next": "fightRaccoon" },
    { "label": "Join the syndicate", "next": "joinSyndicate" },
    { "label": "Ask the raccoon to wait for a minute and study ancient bean magic", "next": "beanMagic" }
  ]
},

  "raccoonEncounterTeam": {
    "text": "You and your neighbor burst into the clearing. The raccoon bandit sighs. 'Two of you? Really?'",
    "choices": [
      { "label": "Let your neighbor handle it", "next": "neighborFight" },
      { "label": "Handle it yourself", "next": "raccoonEncounter" }
    ]
  },

  "neighborFight": {
    "text": "Your neighbor charges with the broom. The raccoon sidesteps effortlessly. 'Pathetic,' it mutters.",
    "choices": [
      { "label": "Help your neighbor", "next": "fightRaccoon" },
      { "label": "Run away", "next": "endingCoward" }
    ]
  },

  "negotiateRaccoon": {
    "text": "You sit down. The raccoon sits too. 'Your beans were delicious,' it admits. 'But perhaps we can strike a deal.'",
    "choices": [
      { "label": "Offer a trade", "next": "tradeOffer" },
      { "label": "Demand your beans back", "next": "demandBeans" }
    ]
  },

  "tradeOffer": {
    "text": "'Bring me three granola bars,' the raccoon says. 'Then we talk.'",
    "choices": [
      { "label": "Agree to the deal", "next": "endingQuest" },
      { "label": "Refuse", "next": "fightRaccoon" }
    ]
  },

  "demandBeans": {
    "text": "You demand your beans back. The raccoon laughs. 'Bold. I respect that.' It returns half the beans.",
    "choices": [
      { "label": "Accept the partial victory", "next": "endingHalfBeans" },
      { "label": "Fight for the rest", "next": "fightRaccoon" }
    ]
  },

  "fightRaccoon": {
    "text": "You charge. The raccoon charges. It’s dramatic. It’s chaotic. It’s... surprisingly adorable.",
    "choices": [
      { "label": "Keep fighting", "next": "fightOutcome" },
      { "label": "Retreat", "next": "endingCoward" },
      { "label": "Hesitate to realize that you are fighting a raccoon over beans instead of getting a job, getting married, or doing something better in life, until the raccoon punches you.", "next": "fightLose" }
    ]
  },

  "fightLose": {
    "text": "The raccoon chitters triumphantly as you collapse onto the grass. Before you can get back up, he grabs your precious beans, stuffs them into a tiny backpack, and scurries off into the shadows.",
    "choices": [
      { "label": "Follow the pawprints", "next": "followPawprints" },
      { "label": "Search the neighborhood", "next": "searchNeighborhood" },
      { "label": "Give up and go home", "next": "endingGiveUp" }
    ]
  },

  "followPawprints": {
    "text": "You follow a trail of tiny pawprints leading toward the old park. They stop near a suspicious-looking trash can.",
    "choices": [
      { "label": "Look inside the trash can", "next": "trashCan" },
      { "label": "Search the park", "next": "parkSearch" }
    ]
  },

  "searchNeighborhood": {
    "text": "You scan the neighborhood. A scrap of fabric from the raccoon's tiny backpack is stuck on a fence.",
    "choices": [
      { "label": "Climb the fence", "next": "fenceClimb" },
      { "label": "Look for more clues", "next": "moreClues" }
    ]
  },

  "trashCan": {
    "text": "You peek inside the trash can. Two glowing raccoon eyes stare back. You close the lid immediately.",
    "choices": [
      { "label": "Back away slowly", "next": "endingCoward" },
      { "label": "Open it again (why?)", "next": "endingCry" }
    ]
  },

  "parkSearch": {
    "text": "You search the park and find a tiny raccoon-sized footprint leading into a storm drain.",
    "choices": [
      { "label": "Enter the storm drain", "next": "endingSyndicate" },
      { "label": "Turn back", "next": "start" }
    ]
  },

  "fenceClimb": {
    "text": "You climb the fence and land in someone's backyard. A raccoon stares at you from a tree branch, holding your beans mockingly.",
    "choices": [
      { "label": "Chase it", "next": "moreClues" },
      { "label": "Retreat", "next": "endingCoward" }
    ]
  },

  "moreClues": {
    "text": "You find a tiny map drawn in crayon. It seems to show a raccoon hideout beneath the old playground.",
    "choices": [
      { "label": "Investigate the playground", "next": "parkSearch" },
      { "label": "Ignore the map", "next": "endingGiveUp" }
    ]
  },
"fightOutcome": {
  "text": "After a flurry of fur and fists, you stand victorious. The raccoon bows. 'You have earned your beans.'",
  "choices": [
    { "label": "Take your beans and go home", "next": "forgetPath" }
  ]
},

"forgetPath": {
  "text": "You have forgotten your way home.",
  "choices": [
    { "label": "Go left", "next": "dropBeans" },
    { "label": "Go straight", "next": "dropBeans" },
    { "label": "Go right", "next": "dropBeans" }
  ]
},

"dropBeans": {
  "text": "You trip over a piece of bread on the ground, and drop the jar of beans. You watch your beloved beans scatter across the dirt.",
  "choices": [
    { "label": "Sit down and cry", "next": "endingCry" },
    { "label": "Taste the beans", "next": "fakeBeans" }
  ]
},

"fakeBeans": {
  "text": "You taste the beans. They taste like wax. These aren't your beans at all.",
  "choices": [
    { "label": "Confront the raccoon", "next": "raccoonEncounter" }
  ]
},

      
  "joinSyndicate": {
    "text": "You kneel. 'Teach me your ways.' The raccoon nods. 'Welcome, Beanling.'",
    "choices": [
      { "label": "Accept your new life", "next": "endingSyndicate" }
    ]
  },

  "bureauIntro": {
  "text": "You arrive at the Bureau of Legumes & Lost Goods. A tired detective looks up. 'Another bean theft?'",
  "choices": [
    { "label": "File a report", "next": "fileReport" },
    { "label": "Ask to see the bean database", "next": "beanDatabase" },
    { "label": "Ask about classified bean anomalies", "next": "metaAwareness" }
  ]
},


  "fileReport": {
    "text": "You fill out 47 pages of paperwork. The detective stamps it. 'We’ll get back to you in 6–8 months.'",
    "choices": [
      { "label": "Cry", "next": "endingCry" },
      { "label": "Go solve it yourself", "next": "start" },
      { "label": "Wait the 6-8 months", "next": "waitLong"}
    ]
  },
  "waitLong": {
    "text": "ENDING: After 50 years without your beans, you get a phone call. The detective tells you that he will find your beans. Before you can respond, your fake teeth fall out of your mouth by accident, and you end up telling him absolute gibberish. The detective is offended, and hangs up.",
    "choices": []
  },
  "beanDatabase": {
    "text": "The detective sighs. 'Fine.' He opens a massive file labeled BEAN CRIMES.",
    "choices": [
      { "label": "Search for raccoon activity", "next": "bureauRaccoon" },
      { "label": "Search for neighbor activity", "next": "bureauNeighbor" }
    ]
   },

  "bureauRaccoon": {
    "text": "The file is huge. The raccoon syndicate has been active for years.",
    "choices": [
      { "label": "Go to the forest", "next": "forestPath" }
    ]
  },

  "bureauNeighbor": {
    "text": "Your neighbor has 14 prior bean‑related incidents. Interesting.",
    "choices": [
      { "label": "Confront them", "next": "neighborDoor" }
    ]
  },

  "endingVictory": {
    "text": "ENDING: You defeated the raccoon and reclaimed your beans. You are now a legend.",
    "choices": []
  },

  "endingHalfBeans": {
    "text": "ENDING: You got half your beans back. Not perfect, but acceptable.",
    "choices": []
  },

  "endingSyndicate": {
    "text": "ENDING: You join the raccoon syndicate. You rise through the ranks. You become the Bean King.",
    "choices": []
  },

  "endingCoward": {
    "text": "ENDING: You ran away. The beans remain lost. The shame is eternal.",
    "choices": []
  },

  "endingCry": {
    "text": "ENDING: You sit down and cry. The forest watches silently.",
    "choices": []
  },

  "endingGiveUp": {
    "text": "ENDING: You give up entirely. The beans are gone forever.",
    "choices": []
  },
  "endingCompensation": {
    "text": "ENDING: Your neighbor gives you $3 as compensation. You buy new beans. Life goes on.",
    "choices": []
  },

  "endingQuest": {
    "text": "ENDING: You embark on a new quest to gather granola bars. The saga continues.",
    "choices": []
  },

    "powPow": {
    "text": "ENDING: Your neighbor knows karate, and punches you in the face. You run away, and trip over a lawn gnome. You forget about your beans, and decide to never throw pieces of bread at your neighbor again.",
    "choices": []
  },

  "chessChallenge": {
    "text": "A mysterious old man steps out of the bushes. 'Solve your bean problem? Beat me in chess.'",
    "choices": [
      { "label": "Accept the challenge", "next": "chessPlay" },
      { "label": "Flip the chessboard and run", "next": "endingCoward" },
      { "label": "Ask if raccoons play chess", "next": "chessLore" }
    ]
  },

  "chessPlay": {
    "text": "You sit at a stone table. The old man moves a pawn. Your beans depend on this.",
    "choices": [
      { "label": "Open with the Sicilian Defense", "next": "endingChessMaster" },
      { "label": "Blunder your queen immediately", "next": "endingChessFail" },
      { "label": "Eat a pawn (literally)", "next": "endingPawnEater" }
    ]
  },

  "chessLore": {
    "text": "'Raccoons? No. They prefer checkers,' the old man says. 'Weak creatures.'",
    "choices": [
      { "label": "Play chess anyway", "next": "chessPlay" },
      { "label": "Go find raccoons who play checkers", "next": "raccoonEncounter" }
    ]
  },

  "endingChessMaster": {
    "text": "ENDING: You win flawlessly. The old man bows. 'You are the Bean Grandmaster now.'",
    "choices": []
  },

  "endingChessFail": {
    "text": "ENDING: You lose in four moves. The old man laughs for 17 minutes straight.",
    "choices": []
  },

  "endingPawnEater": {
    "text": "ENDING: You eat a pawn. It tastes like regret. The old man faints.",
    "choices": []
  },

  "breakReality": {
    "text": "You poke the air. A crack forms in reality. Light leaks out.",
    "choices": [
      { "label": "Step through the crack", "next": "voidEntrance" },
      { "label": "Close the crack politely", "next": "start" },
      { "label": "Widen the crack", "next": "realityShatter" }
    ]
  },

  "voidEntrance": {
    "text": "You enter the Void. A giant cosmic bean floats before you.",
    "choices": [
      { "label": "Speak to the bean", "next": "cosmicBeanTalk" },
      { "label": "Eat the cosmic bean", "next": "endingAscension" }
    ]
  },

  "cosmicBeanTalk": {
    "text": "The cosmic bean whispers: 'Your beans were never stolen. They transcended.'",
    "choices": [
      { "label": "Transcend with them", "next": "endingTranscend" },
      { "label": "Reject enlightenment", "next": "start" }
    ]
  },

  "realityShatter": {
    "text": "Reality collapses. You float in a swirling storm of raccoons, beans, and unpaid taxes.",
    "choices": [
      { "label": "Accept your fate", "next": "endingShattered" },
      { "label": "Try to rebuild reality", "next": "rebuildReality" }
    ]
  },

  "rebuildReality": {
    "text": "You rebuild reality, but accidentally make raccoons the dominant species.",
    "choices": [
      { "label": "Bow to your new raccoon overlords", "next": "endingOverlords" },
      { "label": "Reboot reality again", "next": "start" }
    ]
  },

  "endingAscension": {
    "text": "ENDING: You eat the cosmic bean and ascend to a higher plane. You become Bean Itself.",
    "choices": []
  },

  "endingTranscend": {
    "text": "ENDING: You transcend physical form. Your beans transcend with you. Perfect harmony.",
    "choices": []
  },

  "endingShattered": {
    "text": "ENDING: Reality shatters like glass. You drift forever in the Beanstorm.",
    "choices": []
  },

  "endingOverlords": {
    "text": "ENDING: Raccoons rule the universe. You are appointed Royal Bean Advisor.",
    "choices": []
  },

  "metaAwareness": {
    "text": "You suddenly realize you're in a game. The text feels... scripted.",
    "choices": [
      { "label": "Look for the narrator", "next": "findNarrator" },
      { "label": "Try to escape the game", "next": "escapeGame" },
      { "label": "Delete the game from inside the game", "next": "endingDelete" }
    ]
  },

  "findNarrator": {
    "text": "You look up. A giant floating cursor hovers above you.",
    "choices": [
      { "label": "Talk to the cursor", "next": "cursorTalk" },
      { "label": "Throw beans at it", "next": "endingCursorAngry" }
    ]
  },

  "cursorTalk": {
    "text": "The cursor says: 'Stop breaking the fourth wall. I'm busy.'",
    "choices": [
      { "label": "Break the fifth wall instead", "next": "endingFifthWall" },
      { "label": "Return to the story", "next": "start" }
    ]
  },

  "escapeGame": {
    "text": "You run toward the edge of the screen. The world glitches.",
    "choices": [
      { "label": "Jump out of the window", "next": "endingEscape" },
      { "label": "Stay inside the game", "next": "start" }
    ]
  },

  "endingDelete": {
    "text": "ENDING: You delete the game from within the game. Everything stops existing. Including you.",
    "choices": []
  },

  "endingCursorAngry": {
    "text": "ENDING: The cursor becomes angry and drags you into the settings menu forever.",
    "choices": []
  },

  "endingFifthWall": {
    "text": "ENDING: You break the fifth wall. Nobody knows what that means. You win by default.",
    "choices": []
  },

  "endingEscape": {
    "text": "ENDING: You escape the game and appear on someone's desktop. They scream.",
    "choices": []
  },

  "beanMagic": {
    "text": "You discover an ancient spellbook titled 'Legumancy for Beginners'.",
    "choices": [
      { "label": "Cast a bean spell", "next": "castSpell" },
      { "label": "Summon a bean familiar", "next": "beanFamiliar" }
    ]
  },

  "castSpell": {
    "text": "You cast BEANUS MAXIMUS. Something happens.",
    "choices": [
      { "label": "Hope it's good", "next": "endingWizard" },
      { "label": "Panic", "next": "endingExplosion" }
    ]
  },

  "beanFamiliar": {
    "text": "A tiny bean with legs appears. It salutes you.",
    "choices": [
      { "label": "Adopt it", "next": "endingFamiliar" },
      { "label": "Eat it", "next": "endingEatFamiliar" }
    ]
  },

  "endingWizard": {
    "text": "ENDING: You become a Bean Wizard. Your power is immeasurable.",
    "choices": []
  },

  "endingExplosion": {
    "text": "ENDING: The spell explodes. You are now slightly toasted.",
    "choices": []
  },

  "endingFamiliar": {
    "text": "ENDING: You and your bean familiar go on adventures forever.",
    "choices": []
  },

  "endingEatFamiliar": {
    "text": "ENDING: You eat your bean familiar. It was crunchy. You monster.",
    "choices": []
  },
  "inventoryTest": {
    "text": "You find a strange glowing bean shard on a pedestal.",
    "choices": [
      { "label": "Pick up the shard", "next": "inventoryTest", "item": "Bean Shard" },
      { "label": "Proceed deeper into the chamber", "next": "lockedDoor" }
    ]
  },

  "lockedDoor": {
    "text": "A massive stone door blocks your path. A bean-shaped indentation glows faintly.",
    "choices": [
      { "label": "Insert the Bean Shard", "next": "doorOpens", "requires": "Bean Shard" },
      { "label": "Push the door with your bare hands", "next": "endingCoward" }
    ]
  },

  "doorOpens": {
    "text": "The shard fits perfectly. The door rumbles open, revealing a hidden chamber.",
    "choices": [
      { "label": "Enter the chamber", "next": "skillTreeIntro" }
    ]
  },

  "skillTreeIntro": {
    "text": "A glowing mural depicts ancient bean techniques. You feel knowledge flowing into you.",
    "choices": [
      { "label": "Unlock Bean Sense I", "next": "skillUnlocked", "skill": "beanSense" },
      { "label": "Unlock Raccoon Diplomacy I", "next": "skillUnlocked", "skill": "raccoonTalk" },
      { "label": "Ignore the mural", "next": "start" }
    ]
  },

  "skillUnlocked": {
    "text": "You feel a new power awaken within you.",
    "choices": [
      { "label": "Continue", "next": "loreIntro" }
    ]
  },

  "loreIntro": {
    "text": "Ancient carvings line the walls. They depict the history of the Bean War.",
    "choices": [
      { "label": "Record the carvings", "next": "loreSaved", "lore": "Bean War History" },
      { "label": "Move on", "next": "mapIntro" }
    ]
  },

  "loreSaved": {
    "text": "You jot down the carvings into your Beanpedia.",
    "choices": [
      { "label": "Continue", "next": "mapIntro" }
    ]
  },

  "mapIntro": {
    "text": "A stone map appears on the wall, showing several locations.",
    "choices": [
      { "label": "Unlock the Ancient Chamber on your map", "next": "mapSaved", "location": "Ancient Chamber" },
      { "label": "Ignore the map", "next": "chaosIntro" }
    ]
  },

  "mapSaved": {
    "text": "The map glows. You feel the location imprint itself into your mind.",
    "choices": [
      { "label": "Continue", "next": "chaosIntro" }
    ]
  },

  "chaosIntro": {
    "text": "The air crackles. Something chaotic stirs.",
    "choices": [
      { "label": "Trigger Chaos Mode", "next": "chaosEvent", "chaos": true },
      { "label": "Back away slowly", "next": "start" }
    ]
  },

  "chaosEvent": {
    "text": "CHAOS MODE: Reality begins to distort. Raccoons fall from the ceiling. Beans float upward.",
    "choices": [
      { "label": "Embrace the chaos", "next": "endingShattered" },
      { "label": "Try to stabilize reality", "next": "miniGameIntro" }
    ]
  },

  "miniGameIntro": {
    "text": "A glowing puzzle appears before you. Solve it to restore balance.",
    "choices": [
      { "label": "Start the memory mini-game", "next": "miniGameStart", "minigame": "memory" },
      { "label": "Refuse the challenge", "next": "endingCoward" }
    ]
  },

  "miniGameStart": {
    "text": "The mini-game begins...",
    "choices": [
      { "label": "Return to the story", "next": "start" }
    ]
  }

}
